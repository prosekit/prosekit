{"version":3,"file":"create-component-DOv1yHjo.js","names":["properties: Record<string, () => unknown>","eventHandlers: Record<string, AnyFunction>"],"sources":["../src/components/create-component.ts"],"sourcesContent":["import type { AnyFunction } from '@prosekit/core'\nimport type { Component } from 'solid-js'\nimport h from 'solid-js/h'\n\nimport { useEditorContext } from '../contexts/editor-context'\nimport type { PropsWithElement } from '../types'\n\nexport function createComponent<\n  Props extends object,\n  CustomElement extends HTMLElement,\n>(\n  tagName: string,\n  propNames: string[],\n  eventNames: string[],\n): Component<PropsWithElement<Props, CustomElement>> {\n  const hasEditor = propNames.includes('editor')\n  const lowerCaseEventNameMap = new Map(\n    eventNames.map((name) => [name.toLowerCase(), name]),\n  )\n\n  const Component = (props: Record<string, unknown>) => {\n    const properties: Record<string, () => unknown> = {}\n    const eventHandlers: Record<string, AnyFunction> = {}\n\n    for (const name of Object.keys(props)) {\n      if (propNames.includes(name)) {\n        properties['prop:' + name] = () => props[name]\n        continue\n      }\n\n      if (name.startsWith('on')) {\n        const lowerCaseEventName = name.slice(2).toLowerCase()\n        const eventName = lowerCaseEventNameMap.get(lowerCaseEventName)\n        if (eventName) {\n          const extractDetail = eventName.endsWith('Change')\n          eventHandlers['on:' + eventName] = (event: Event) => {\n            const handler = props[name] as AnyFunction | null\n            if (typeof handler === 'function') {\n              handler(extractDetail ? (event as CustomEvent).detail : event)\n            }\n          }\n          continue\n        }\n      }\n\n      properties[name] = () => props[name]\n    }\n\n    const editor = useEditorContext()\n\n    if (hasEditor && editor) {\n      properties['prop:editor'] = () => props['editor'] || editor\n    }\n\n    return h(tagName, { ...properties, ...eventHandlers })\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n  return Component as any\n}\n"],"mappings":";;;;AAOA,SAAgB,gBAId,SACA,WACA,YACmD;CACnD,MAAM,YAAY,UAAU,SAAS,SAAS;CAC9C,MAAM,wBAAwB,IAAI,IAChC,WAAW,KAAK,SAAS,CAAC,KAAK,aAAa,EAAE,KAAK,CAAC,CACrD;CAED,MAAM,aAAa,UAAmC;EACpD,MAAMA,aAA4C,EAAE;EACpD,MAAMC,gBAA6C,EAAE;AAErD,OAAK,MAAM,QAAQ,OAAO,KAAK,MAAM,EAAE;AACrC,OAAI,UAAU,SAAS,KAAK,EAAE;AAC5B,eAAW,UAAU,cAAc,MAAM;AACzC;;AAGF,OAAI,KAAK,WAAW,KAAK,EAAE;IACzB,MAAM,qBAAqB,KAAK,MAAM,EAAE,CAAC,aAAa;IACtD,MAAM,YAAY,sBAAsB,IAAI,mBAAmB;AAC/D,QAAI,WAAW;KACb,MAAM,gBAAgB,UAAU,SAAS,SAAS;AAClD,mBAAc,QAAQ,cAAc,UAAiB;MACnD,MAAM,UAAU,MAAM;AACtB,UAAI,OAAO,YAAY,WACrB,SAAQ,gBAAiB,MAAsB,SAAS,MAAM;;AAGlE;;;AAIJ,cAAW,cAAc,MAAM;;EAGjC,MAAM,SAAS,kBAAkB;AAEjC,MAAI,aAAa,OACf,YAAW,uBAAuB,MAAM,aAAa;AAGvD,SAAO,EAAE,SAAS;GAAE,GAAG;GAAY,GAAG;GAAe,CAAC;;AAIxD,QAAO"}