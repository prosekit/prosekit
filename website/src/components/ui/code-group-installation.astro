---
import CodeTabItem from 'starlight-theme-nova/components/CodeTabItem.astro'
import CodeTabs from 'starlight-theme-nova/components/CodeTabs.astro'

interface Props {
  dev?: boolean
  packages: string
}

const props: Props = Astro.props

const packageManagers = ['pnpm', 'npm', 'yarn', 'bun'] as const

type PackageManager = typeof packageManagers[number]

function getCode(packageManager: PackageManager) {
  const parts: string[] = [
    {
      pnpm: 'pnpm add',
      npm: 'npm install',
      yarn: 'yarn add',
      bun: 'bun add',
    }[packageManager],

    props.dev ? '-D' : '',

    props.packages,
  ]

  return parts.filter(Boolean).join(' ')
}
---

<CodeTabs syncKey="code-group-installation">
  {packageManagers.map(pkg => <CodeTabItem label={pkg} lang="shell" code={getCode(pkg)} />)}
</CodeTabs>
